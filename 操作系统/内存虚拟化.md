---
created_at: 2023-10-02
modified_at: 2023-10-02
description: 
aliases: 
tags:
  - 操作系统
---

## 程序生命周期
- 逻辑地址 物理地址 虚拟地址
- 编译
- 链接
	- 静态链接
	- 装入动态链接
	- 运行时动态链接
- 装入
	- 绝对装入
	- 静态重定位
	- 动态重定位
## 内存管理的功能
- 分配回收
- 虚实转换
- 扩展
- 隔离
## 简单内存虚拟化
假定一个进程分配的内存都是连续的
### 内存保护
- 基址寄存器和界限寄存器
### 内存共享
- 可重入代码
### 覆盖和交换
### 外部碎片内部碎片
### 管理方式
- 单一分配
- 固定分区分配
- 动态分区分配 -> [[#动态分区分配算法|策略]]

||作业道数|内部碎片|外部碎片|硬件支持|管理空间的数据结构|解决空间不足的方法|提高作业道数|
|--|--|--|--|--|--|--|--|
|单道连续分配|1|O|X|界地址寄存器 越界检查||覆盖|交换|
|多道固定连续分配|小于分的块数|O|X|基址寄存器界限寄存器动态地址转换|空闲链表 空闲表||||
|多道可变连续分配|不好说|X|O|同上|同上|紧凑|||
### 动态分区分配算法
- 首次匹配
	- 快
	- 对各个部分的内存磨损不一致, 内存起始部分容易出现碎片
- 下次匹配
	- 不如首次匹配
	- 尾部磨损严重
- 最佳匹配
	- 慢
	- 碎片化严重
- 最差匹配
	- 慢
	- 浪费大内存块
	- 碎片化不严重
- 伙伴算法
## 非连续分配
### 方式
- 段式分配
	**概念**
	段号 页内偏移 段表
- 页式分配
	**概念**
	页 虚拟页号 物理页号 页内偏移
- 段页式分配

## 页式存储概念
- 页表 存在位 内存块地址 脏位访问位 权限位rwx...
- 多级页表
- 页表项
- 页表基址寄存器
- TLB
## 虚拟内存技术
### 传统存储管理方式特征
- **一次性**
- **驻留性**
### 虚拟存储器的定义和特征
基于**局部性原理**
- **多次性**
- **对换性**
- **虚拟性**
### [[#方式|实现]]
### 缺页中断
![[../assets/img/20231003231906.png]]
### 访存流程
![[../assets/img/20231003232217.png]]
### [[../算法/缓存淘汰策略算法|页面淘汰策略]]
### 页面分配策略
#### 驻留集
指请求分页存储管理中给进程分配的物理块的集合
太大浪费
太小频繁的处理缺页异常
#### 策略
驻留集数量: 可变 固定
页面置换策略: 用本进程的内存页置换还是全局一盘棋？ 局部 全局
#### 时机
- 预调页策略 --> 立刻分配
- 请求调页策略 --> 惰性分配
#### 从何处调入页面
1.  系统拥有足够的对换区空间
    - 页面的调入、调出都是在内存与对换区之间进行，这样可以保证页面的调入、调出速度很快。
    - 在进程运行前，需将进程相关的数据从文件区复制到对换区
2. 系统缺少足够的对换区空间
    - 凡是不会被修改的数据都直接从文件区调入，由于这些页面不会被修改，因此换出时不必写回磁盘，下次需要时再从文件区调入即可。
    - 对于可能被修改的部分，换出时需写回磁盘对换区，下次需要时再从对换区调入。
3. UNIX方式
    - 运行之前进程有关的数据全部放在文件区，故未使用过的页面，都可从文件区调入。
    - 若被使用过的页面需要换出，则写回对换区，下次需要时从对换区调入。

## 抖动
高水位线 低水位线

## 工作集
与驻留集不同，工作集指的是在某段时间间隔里，进程**实际访问页面**的集合。
工作集的大小若大于驻留集，则会发生**抖动**现象。